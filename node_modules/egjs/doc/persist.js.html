<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: plugin/persist.js | egjs - API</title>
    
    <meta name="description" content="egjs is a jQuery-based JavaScript library consisting of UI interactions, effects, and utilities, which brings easiest and fastest way to build a web application in your way." />
    
        <meta name="keywords" content="jQuery, UI Component, egjs" />
        <meta name="keyword" content="jQuery, UI Component, egjs" />
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <link rel="canonical" href="http://naver.github.io/egjs/latest/doc/"/>
    
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"egjs","disqus":"egjs","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"egjs - API","description":"egjs is a jQuery-based JavaScript library consisting of UI interactions, effects, and utilities, which brings easiest and fastest way to build a web application in your way.","keyword":"jQuery, UI Component, egjs"},"linenums":true,"link":{"canonical":"http://naver.github.io/egjs/latest/doc/"}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">egjs</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
    
        <!-- Grouping Version -->
        <ul class="group">
        <span>egjs</span>
        
            
<li class="item" data-name="eg">
    <span class="title">
        <a href="eg.html">eg</a>
        
        <span class="static">static</span>
        
    </span>
    <ul class="members itemMembers">
    
    <span class="subtitle">Members</span>
    
        <li data-name="eg.VERSION"><a href="eg.html#VERSION">VERSION</a></li>
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg#agent"><a href="eg.html#agent">agent</a></li>
    
        <li data-name="eg#cancelAnimationFrame"><a href="eg.html#cancelAnimationFrame">cancelAnimationFrame</a></li>
    
        <li data-name="eg#isHWAccelerable"><a href="eg.html#isHWAccelerable">isHWAccelerable</a></li>
    
        <li data-name="eg#isPortrait"><a href="eg.html#isPortrait">isPortrait</a></li>
    
        <li data-name="eg#isTransitional"><a href="eg.html#isTransitional">isTransitional</a></li>
    
        <li data-name="eg#requestAnimationFrame"><a href="eg.html#requestAnimationFrame">requestAnimationFrame</a></li>
    
        <li data-name="eg#translate"><a href="eg.html#translate">translate</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.Class">
    <span class="title">
        <a href="eg.Class.html">eg.Class</a>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.Class.extend"><a href="eg.Class.html#extend">extend</a></li>
    
        <li data-name="eg.Class#instance"><a href="eg.Class.html#instance">instance</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.Component">
    <span class="title">
        <a href="eg.Component.html">eg.Component</a>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.Component#hasOn"><a href="eg.Component.html#hasOn">hasOn</a></li>
    
        <li data-name="eg.Component#off"><a href="eg.Component.html#off">off</a></li>
    
        <li data-name="eg.Component#on"><a href="eg.Component.html#on">on</a></li>
    
        <li data-name="eg.Component#once"><a href="eg.Component.html#once">once</a></li>
    
        <li data-name="eg.Component#option"><a href="eg.Component.html#option">option</a></li>
    
        <li data-name="eg.Component#trigger"><a href="eg.Component.html#trigger">trigger</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.Flicking">
    <span class="title">
        <a href="eg.Flicking.html">eg.Flicking</a>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.Flicking#destroy"><a href="eg.Flicking.html#destroy">destroy</a></li>
    
        <li data-name="eg.Flicking#disableInput"><a href="eg.Flicking.html#disableInput">disableInput</a></li>
    
        <li data-name="eg.Flicking#enableInput"><a href="eg.Flicking.html#enableInput">enableInput</a></li>
    
        <li data-name="eg.Flicking#getAllElements"><a href="eg.Flicking.html#getAllElements">getAllElements</a></li>
    
        <li data-name="eg.Flicking#getElement"><a href="eg.Flicking.html#getElement">getElement</a></li>
    
        <li data-name="eg.Flicking#getIndex"><a href="eg.Flicking.html#getIndex">getIndex</a></li>
    
        <li data-name="eg.Flicking#getNextElement"><a href="eg.Flicking.html#getNextElement">getNextElement</a></li>
    
        <li data-name="eg.Flicking#getNextIndex"><a href="eg.Flicking.html#getNextIndex">getNextIndex</a></li>
    
        <li data-name="eg.Flicking#getPrevElement"><a href="eg.Flicking.html#getPrevElement">getPrevElement</a></li>
    
        <li data-name="eg.Flicking#getPrevIndex"><a href="eg.Flicking.html#getPrevIndex">getPrevIndex</a></li>
    
        <li data-name="eg.Flicking#getTotalCount"><a href="eg.Flicking.html#getTotalCount">getTotalCount</a></li>
    
        <li data-name="eg.Flicking#hasOn"><a href="eg.Flicking.html#hasOn">hasOn</a></li>
    
        <li data-name="eg.Flicking#isPlaying"><a href="eg.Flicking.html#isPlaying">isPlaying</a></li>
    
        <li data-name="eg.Flicking#moveTo"><a href="eg.Flicking.html#moveTo">moveTo</a></li>
    
        <li data-name="eg.Flicking#next"><a href="eg.Flicking.html#next">next</a></li>
    
        <li data-name="eg.Flicking#off"><a href="eg.Flicking.html#off">off</a></li>
    
        <li data-name="eg.Flicking#on"><a href="eg.Flicking.html#on">on</a></li>
    
        <li data-name="eg.Flicking#once"><a href="eg.Flicking.html#once">once</a></li>
    
        <li data-name="eg.Flicking#option"><a href="eg.Flicking.html#option">option</a></li>
    
        <li data-name="eg.Flicking#prev"><a href="eg.Flicking.html#prev">prev</a></li>
    
        <li data-name="eg.Flicking#resize"><a href="eg.Flicking.html#resize">resize</a></li>
    
        <li data-name="eg.Flicking#restore"><a href="eg.Flicking.html#restore">restore</a></li>
    
        <li data-name="eg.Flicking#trigger"><a href="eg.Flicking.html#trigger">trigger</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.Flicking#event:beforeFlickStart"><a href="eg.Flicking.html#event:beforeFlickStart">beforeFlickStart</a></li>
    
        <li data-name="eg.Flicking#event:beforeRestore"><a href="eg.Flicking.html#event:beforeRestore">beforeRestore</a></li>
    
        <li data-name="eg.Flicking#event:flick"><a href="eg.Flicking.html#event:flick">flick</a></li>
    
        <li data-name="eg.Flicking#event:flickEnd"><a href="eg.Flicking.html#event:flickEnd">flickEnd</a></li>
    
        <li data-name="eg.Flicking#event:restore"><a href="eg.Flicking.html#event:restore">restore</a></li>
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.InfiniteGrid">
    <span class="title">
        <a href="eg.InfiniteGrid.html">eg.InfiniteGrid</a>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.InfiniteGrid#append"><a href="eg.InfiniteGrid.html#append">append</a></li>
    
        <li data-name="eg.InfiniteGrid#clear"><a href="eg.InfiniteGrid.html#clear">clear</a></li>
    
        <li data-name="eg.InfiniteGrid#destroy"><a href="eg.InfiniteGrid.html#destroy">destroy</a></li>
    
        <li data-name="eg.InfiniteGrid#fit"><a href="eg.InfiniteGrid.html#fit">fit</a></li>
    
        <li data-name="eg.InfiniteGrid#getBottomElement"><a href="eg.InfiniteGrid.html#getBottomElement">getBottomElement</a></li>
    
        <li data-name="eg.InfiniteGrid#getGroupKeys"><a href="eg.InfiniteGrid.html#getGroupKeys">getGroupKeys</a></li>
    
        <li data-name="eg.InfiniteGrid#getStatus"><a href="eg.InfiniteGrid.html#getStatus">getStatus</a></li>
    
        <li data-name="eg.InfiniteGrid#getTopElement"><a href="eg.InfiniteGrid.html#getTopElement">getTopElement</a></li>
    
        <li data-name="eg.InfiniteGrid#hasOn"><a href="eg.InfiniteGrid.html#hasOn">hasOn</a></li>
    
        <li data-name="eg.InfiniteGrid#isProcessing"><a href="eg.InfiniteGrid.html#isProcessing">isProcessing</a></li>
    
        <li data-name="eg.InfiniteGrid#isRecycling"><a href="eg.InfiniteGrid.html#isRecycling">isRecycling</a></li>
    
        <li data-name="eg.InfiniteGrid#layout"><a href="eg.InfiniteGrid.html#layout">layout</a></li>
    
        <li data-name="eg.InfiniteGrid#off"><a href="eg.InfiniteGrid.html#off">off</a></li>
    
        <li data-name="eg.InfiniteGrid#on"><a href="eg.InfiniteGrid.html#on">on</a></li>
    
        <li data-name="eg.InfiniteGrid#once"><a href="eg.InfiniteGrid.html#once">once</a></li>
    
        <li data-name="eg.InfiniteGrid#option"><a href="eg.InfiniteGrid.html#option">option</a></li>
    
        <li data-name="eg.InfiniteGrid#prepend"><a href="eg.InfiniteGrid.html#prepend">prepend</a></li>
    
        <li data-name="eg.InfiniteGrid#remove"><a href="eg.InfiniteGrid.html#remove">remove</a></li>
    
        <li data-name="eg.InfiniteGrid#setStatus"><a href="eg.InfiniteGrid.html#setStatus">setStatus</a></li>
    
        <li data-name="eg.InfiniteGrid#trigger"><a href="eg.InfiniteGrid.html#trigger">trigger</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.InfiniteGrid#event:append"><a href="eg.InfiniteGrid.html#event:append">append</a></li>
    
        <li data-name="eg.InfiniteGrid#event:layoutComplete"><a href="eg.InfiniteGrid.html#event:layoutComplete">layoutComplete</a></li>
    
        <li data-name="eg.InfiniteGrid#event:prepend"><a href="eg.InfiniteGrid.html#event:prepend">prepend</a></li>
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.MovableCoord">
    <span class="title">
        <a href="eg.MovableCoord.html">eg.MovableCoord</a>
        
    </span>
    <ul class="members itemMembers">
    
    <span class="subtitle">Members</span>
    
        <li data-name="eg.MovableCoord.DIRECTION_ALL"><a href="eg.MovableCoord.html#DIRECTION_ALL">DIRECTION_ALL</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_DOWN"><a href="eg.MovableCoord.html#DIRECTION_DOWN">DIRECTION_DOWN</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_HORIZONTAL"><a href="eg.MovableCoord.html#DIRECTION_HORIZONTAL">DIRECTION_HORIZONTAL</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_LEFT"><a href="eg.MovableCoord.html#DIRECTION_LEFT">DIRECTION_LEFT</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_NONE"><a href="eg.MovableCoord.html#DIRECTION_NONE">DIRECTION_NONE</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_RIGHT"><a href="eg.MovableCoord.html#DIRECTION_RIGHT">DIRECTION_RIGHT</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_UP"><a href="eg.MovableCoord.html#DIRECTION_UP">DIRECTION_UP</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_VERTICAL"><a href="eg.MovableCoord.html#DIRECTION_VERTICAL">DIRECTION_VERTICAL</a></li>
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.MovableCoord#bind"><a href="eg.MovableCoord.html#bind">bind</a></li>
    
        <li data-name="eg.MovableCoord#destroy"><a href="eg.MovableCoord.html#destroy">destroy</a></li>
    
        <li data-name="eg.MovableCoord#disableInput"><a href="eg.MovableCoord.html#disableInput">disableInput</a></li>
    
        <li data-name="eg.MovableCoord#enableInput"><a href="eg.MovableCoord.html#enableInput">enableInput</a></li>
    
        <li data-name="eg.MovableCoord#get"><a href="eg.MovableCoord.html#get">get</a></li>
    
        <li data-name="eg.MovableCoord#getHammer"><a href="eg.MovableCoord.html#getHammer">getHammer</a></li>
    
        <li data-name="eg.MovableCoord#hasOn"><a href="eg.MovableCoord.html#hasOn">hasOn</a></li>
    
        <li data-name="eg.MovableCoord#off"><a href="eg.MovableCoord.html#off">off</a></li>
    
        <li data-name="eg.MovableCoord#on"><a href="eg.MovableCoord.html#on">on</a></li>
    
        <li data-name="eg.MovableCoord#once"><a href="eg.MovableCoord.html#once">once</a></li>
    
        <li data-name="eg.MovableCoord#option"><a href="eg.MovableCoord.html#option">option</a></li>
    
        <li data-name="eg.MovableCoord#setBy"><a href="eg.MovableCoord.html#setBy">setBy</a></li>
    
        <li data-name="eg.MovableCoord#setTo"><a href="eg.MovableCoord.html#setTo">setTo</a></li>
    
        <li data-name="eg.MovableCoord#trigger"><a href="eg.MovableCoord.html#trigger">trigger</a></li>
    
        <li data-name="eg.MovableCoord#unbind"><a href="eg.MovableCoord.html#unbind">unbind</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.MovableCoord#event:animationEnd"><a href="eg.MovableCoord.html#event:animationEnd">animationEnd</a></li>
    
        <li data-name="eg.MovableCoord#event:change"><a href="eg.MovableCoord.html#event:change">change</a></li>
    
        <li data-name="eg.MovableCoord#event:hold"><a href="eg.MovableCoord.html#event:hold">hold</a></li>
    
        <li data-name="eg.MovableCoord#event:release"><a href="eg.MovableCoord.html#event:release">release</a></li>
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.Visible">
    <span class="title">
        <a href="eg.Visible.html">eg.Visible</a>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.Visible#check"><a href="eg.Visible.html#check">check</a></li>
    
        <li data-name="eg.Visible#hasOn"><a href="eg.Visible.html#hasOn">hasOn</a></li>
    
        <li data-name="eg.Visible#off"><a href="eg.Visible.html#off">off</a></li>
    
        <li data-name="eg.Visible#on"><a href="eg.Visible.html#on">on</a></li>
    
        <li data-name="eg.Visible#once"><a href="eg.Visible.html#once">once</a></li>
    
        <li data-name="eg.Visible#option"><a href="eg.Visible.html#option">option</a></li>
    
        <li data-name="eg.Visible#refresh"><a href="eg.Visible.html#refresh">refresh</a></li>
    
        <li data-name="eg.Visible#trigger"><a href="eg.Visible.html#trigger">trigger</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.Visible#event:change"><a href="eg.Visible.html#event:change">change</a></li>
    
    </ul>

    

</li>

        
        </ul>
    
        <!-- Grouping Version -->
        <ul class="group">
        <span>jQuery Extension</span>
        
            
<li class="item" data-name="$.persist.isNeeded">
    <span class="title">
        <a href="$.persist.isNeeded.html">$.persist.isNeeded</a>
        
        <span class="static">static</span>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    </ul>
    <ul class="events itemMembers">
    
    </ul>

    

</li>

        
            
<li class="item" data-name="jQuery">
    <span class="title">
        <a href="jQuery.html">jQuery</a>
        
        <span class="static">static</span>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="jQuery.flicking"><a href="jQuery.html#flicking">flicking</a></li>
    
        <li data-name="jQuery.infiniteGrid"><a href="jQuery.html#infiniteGrid">infiniteGrid</a></li>
    
        <li data-name="jQuery.persist"><a href="jQuery.html#persist">persist</a></li>
    
        <li data-name="jQuery.visible"><a href="jQuery.html#visible">visible</a></li>
    
        <li data-name="jQuery#animate"><a href="jQuery.html#animate">animate</a></li>
    
        <li data-name="jQuery#cssPrefix"><a href="jQuery.html#cssPrefix">cssPrefix</a></li>
    
        <li data-name="jQuery#pause"><a href="jQuery.html#pause">pause</a></li>
    
        <li data-name="jQuery#resume"><a href="jQuery.html#resume">resume</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    <span class="subtitle">Events</span>
    
        <li data-name="jQuery#event:persist"><a href="jQuery.html#event:persist">persist</a></li>
    
        <li data-name="jQuery#event:rotate"><a href="jQuery.html#event:rotate">rotate</a></li>
    
        <li data-name="jQuery#event:scrollEnd"><a href="jQuery.html#event:scrollEnd">scrollEnd</a></li>
    
        <li data-name="jQuery#flicking:beforeFlickStart"><a href="jQuery.html#event:flicking:beforeFlickStart">flicking:beforeFlickStart</a></li>
    
        <li data-name="jQuery#flicking:beforeRestore"><a href="jQuery.html#event:flicking:beforeRestore">flicking:beforeRestore</a></li>
    
        <li data-name="jQuery#flicking:flick"><a href="jQuery.html#event:flicking:flick">flicking:flick</a></li>
    
        <li data-name="jQuery#flicking:flickEnd"><a href="jQuery.html#event:flicking:flickEnd">flicking:flickEnd</a></li>
    
        <li data-name="jQuery#flicking:restore"><a href="jQuery.html#event:flicking:restore">flicking:restore</a></li>
    
        <li data-name="jQuery#infiniteGrid:append"><a href="jQuery.html#event:infiniteGrid:append">infiniteGrid:append</a></li>
    
        <li data-name="jQuery#infiniteGrid:layoutComplete"><a href="jQuery.html#event:infiniteGrid:layoutComplete">infiniteGrid:layoutComplete</a></li>
    
        <li data-name="jQuery#infiniteGrid:prepend"><a href="jQuery.html#event:infiniteGrid:prepend">infiniteGrid:prepend</a></li>
    
        <li data-name="jQuery#visible:change"><a href="jQuery.html#event:visible:change">visible:change</a></li>
    
    </ul>

    

</li>

        
        </ul>
    
    </ul>
</div>

    <div class="main">
        <h1 class="page-title" data-filename="persist.js.html">Source: plugin/persist.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
* Copyright (c) 2015 NAVER Corp.
* egjs projects are licensed under the MIT license
*/

// jscs:disable maximumLineLength
eg.module("persist", ["jQuery", eg, window, document], function($, ns, global, doc) {
	"use strict";

	// jscs:enable maximumLineLength
	var wp = global.performance;
	var history = global.history;
	var agent = ns.agent();

	var isNeeded = (function() {
		var version = parseFloat(agent.os.version);

		return !(
				agent.os.name === "ios" ||
				(agent.os.name === "mac" && agent.browser.name === "safari") ||
				(agent.os.name === "android" &&
					(version &lt;= 4.3 && agent.browser.webview === true || version &lt; 3))
		);
	})();

	var JSON = global.JSON;
	var CONST_PERSIST = "___persist___";
	var GLOBAL_KEY = "KEY" + CONST_PERSIST;
	var $global = $(global);
	var isPersisted = $global.attr(CONST_PERSIST) === true;

	// In case of IE8, TYPE_BACK_FORWARD is undefined.
	var isBackForwardNavigated = (wp && wp.navigation &&
									(wp.navigation.type === (wp.navigation.TYPE_BACK_FORWARD || 2)));
	var isSupportState = "replaceState" in history && "state" in history;

	var storage = (function() {
		if (isStorageAvailable(global.sessionStorage)) {
			return global.sessionStorage;
		} else if (isStorageAvailable(global.localStorage)) {
			return global.localStorage;
		}
	})();

	function isStorageAvailable(storage) {
		if (!storage) {
			return;
		}
		var TMP_KEY = "__tmp__" + CONST_PERSIST;

		try {
			// In case of iOS safari private mode, calling setItem on storage throws error
			storage.setItem(TMP_KEY, CONST_PERSIST);

			// In Chrome incognito mode, can not get saved value
			// In IE8, calling storage.getItem occasionally makes "Permission denied" error
			return storage.getItem(TMP_KEY) === CONST_PERSIST;
		} catch (e) {
			return false;
		}
	}
	if (!isSupportState && !storage) {
		return;
	}

	// jscs:disable maximumLineLength
	/* jshint ignore:start */
	if (!JSON) {
		console.warn(
		"The JSON object is not supported in your browser.\r\n" +
		"For work around use polyfill which can be found at:\r\n" +
		"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON#Polyfill");
		return;
	}
	/* jshint ignore:end */

	// jscs:enable maximumLineLength

	/**
	 * This jQuery custom event is fired when device rotates.
	 *
	 * @ko 기기가 회전할 때 발생하는 jQuery 커스텀 이벤트
	 * @name jQuery#persist
	 * @event
	 * @deprecated since version 1.2.0
	 * @example
	 * $(window).on("persist",function(){
	 *      var state = $.persist("KEY");
	 *		// Restore state
	 * });
	 *
	 */
	function onPageshow(e) {
		isPersisted = isPersisted || (e.originalEvent && e.originalEvent.persisted);
		if (!isPersisted && isBackForwardNavigated) {
			$global.trigger("persist");
		} else {
			reset();
		}
	}

	/*
	 * flush current history state
	 */
	function reset() {
		setState(null);
	}
	/*
	 * Get state value
	 */
	function getState() {
		var state;
		var stateStr = storage ?
			storage.getItem(global.location.href + CONST_PERSIST) : history.state;

		// the storage is clean
		if (stateStr === null) {
			return {};
		}

		// "null" is not a valid
		var isValidStateStr = typeof stateStr === "string" &&
									stateStr.length > 0 && stateStr !== "null";
		var isValidType;

		try {
			state = JSON.parse(stateStr);

			// like '[ ... ]', '1', '1.234', '"123"' is also not valid
			isValidType = !($.type(state) !== "object" || state instanceof Array);

			if (!isValidStateStr || !isValidType) {
				throw new Error();
			}
		} catch (e) {
			warnInvalidStorageValue();
			state = {};
		}

		// Note2 (Android 4.3) return value is null
		return state;
	}

	function warnInvalidStorageValue() {
		/* jshint ignore:start */
		console.warn("window.history or session/localStorage has no valid " +
				"format data to be handled in persist.");
		/* jshint ignore:end */
	}

	function getStateByKey(key) {
		var result = getState()[key];

		// some device returns "null" or undefined
		if (result === "null" || typeof result === "undefined") {
			result = null;
		}
		return result;
	}
	/*
	 * Set state value
	 */
	function setState(state) {
		if (storage) {
			if (state) {
				storage.setItem(
					global.location.href + CONST_PERSIST, JSON.stringify(state));
			} else {
				storage.removeItem(global.location.href  + CONST_PERSIST);
			}
		} else {
			try {
				history.replaceState(
					state === null ? null : JSON.stringify(state),
					doc.title,
					global.location.href
				);
			} catch (e) {
				/* jshint ignore:start */
				console.warn(e.message);
				/* jshint ignore:end */
			}
		}

		state ? $global.attr(CONST_PERSIST, true) : $global.attr(CONST_PERSIST, null);
	}

	function setStateByKey(key, data) {
		var beforeData = getState();
		beforeData[key] = data;
		setState(beforeData);
	}
	/**
	* Get or store the current state of the web page using JSON.
	* @ko 웹 페이지의 현재 상태를 JSON 형식으로 저장하거나 읽는다.
	* @method jQuery.persist
    * @param {String} key The key of the state information to be stored &lt;ko>저장할 상태 정보의 키&lt;/ko>
    * @param {Object} [state] The value to be stored in a given key &lt;ko>키에 저장할 값&lt;/ko>
	* @example
	// when 'key' and 'value' are given, it saves state object
	$.persist("KEY",state);
	// when only 'key' is given, it loads state object
	var state = $.persist("KEY");
	* @example
	// this is deprecated API
	// save state without Key
	$.persist(state);
	// get state without Key
	var state = $.persist();
	*/
	$.persist = function(state, data) {
		var key;

		if (typeof state === "string") {
			key = state;
		} else {
			key = GLOBAL_KEY;
			data = arguments.length === 1 ? state : null;
		}

		if (data || arguments.length === 2) {
			setStateByKey(key, data);
		}

		return getStateByKey(key);
	};

	/**
	* Return whether you need "Persist" module by checking the bfCache support of the current browser
	* @ko 현재 브라우저의 bfCache 지원여부에 따라 persist 모듈의 필요여부를 반환한다.
	* @group jQuery Extension
	* @namespace
	* @property {function} isNeeded
	* @example
	$.persist.isNeeded();
	*/
	$.persist.isNeeded = function() {
		return isNeeded;
	};

	// in case of reload
	!isBackForwardNavigated && reset();

	$.event.special.persist = {
		setup: function() {
			$global.on("pageshow", onPageshow);
		},
		teardown: function() {
			$global.off("pageshow", onPageshow);
		},
		trigger: function(e) {
			//If you use 'persist' event, you can get global-key only!
			e.state = getStateByKey(GLOBAL_KEY);
		}
	};
	return {
		"isBackForwardNavigated": isBackForwardNavigated,
		"onPageshow": onPageshow,
		"reset": reset,
		"getState": getState,
		"setState": setState,
		"GLOBALKEY": GLOBAL_KEY
	};
});</code></pre>
        </article>
    </section>






        
        <!-- disqus code -->
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <!-- // disqus code -->
        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Thu Apr 20 2017 14:51:27 GMT+0900 (KST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
